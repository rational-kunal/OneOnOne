(this.webpackJsonpp2pxo=this.webpackJsonpp2pxo||[]).push([[0],{76:function(e,t,a){e.exports=a(91)},81:function(e,t,a){},87:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=87},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=(a(81),a(28)),i=a(23),u=a(13),m=a(130),s=a(145);function f(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"12px"}},r.a.createElement(o.b,{to:"/create"},r.a.createElement(m.a,{variant:"contained"},"create room"))),r.a.createElement("div",{style:{margin:"12px"}},r.a.createElement(s.a,{style:{marginRight:"12px"},size:"small",label:"peer id",variant:"outlined",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(o.b,{to:"/join/"+a},r.a.createElement(m.a,{variant:"contained",size:"large"},"join"))))}var b=a(60),E=a.n(b),d=new(a(61).Dispatcher),h="BLAB_RECEVIE",v="BLAB_SEND";var p=a(70),j=a(62),O=a(63),g=a(71),y=a(69),S=a(64),C=[],w=new(function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListner",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getBlabHistory",value:function(){return C}}]),a}(S.EventEmitter));d.register((function(e){switch(e.actionType){case h:case v:C.push(e.blab),w.emitChange()}}));var x=w,k=a(93),B=a(146),D=a(138),I=a(134),L=a(65),T=a.n(L),P=a(66),F=a.n(P),_=a(67),M=a.n(_),N=a(135),R=a(137),U=a(136);function z(e){var t=e.sendToFn,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1];return r.a.createElement("div",{component:"form"},r.a.createElement(B.a,{style:{marginLeft:12},value:l,onChange:function(e){return o(e.target.value)},placeholder:"Chat"}),r.a.createElement(I.a,{type:"submit","aria-label":"search",onClick:function(){return t(l)}},r.a.createElement(T.a,null)))}function A(e){var t=e.blab;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{button:!0},r.a.createElement(U.a,null,"me"===t.by?r.a.createElement(F.a,null):r.a.createElement(M.a,null)),r.a.createElement(R.a,{primary:t.blab})),r.a.createElement(D.a,{light:!0}))}function H(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(X);return Object(n.useEffect)((function(){x.addChangeListener((function(){c(Object(p.a)(x.getBlabHistory()))}))}),[]),r.a.createElement(k.a,null,a.map((function(e){return r.a.createElement(A,{blab:e})})),r.a.createElement(z,{sendToFn:l}))}var J=a(139);function V(e){var t=e.stream,a=Object(n.useState)(r.a.createRef()),c=Object(u.a)(a,1)[0];return t&&(c.current.srcObject=t),r.a.createElement(J.a,{style:{marginBottom:12},variant:"outlined",raised:!0},r.a.createElement("video",{width:"100%",height:"100%",ref:c,autoPlay:!0}))}var W=a(140),q=a(45),G=a(141);function K(e){var t=e.localStream,a=e.otherPeerStream,n=e.shoulDisplayChat,c=e.joinData;return r.a.createElement(W.a,{container:!0,spacing:2},r.a.createElement(W.a,{item:!0,xs:12,md:5},r.a.createElement(V,{stream:t}),r.a.createElement(V,{stream:a})),r.a.createElement(W.a,{item:!0,xs:12,md:7},c.shouldShow&&r.a.createElement(Q,{peerId:c.peerId}),n&&r.a.createElement(H,null)))}function Q(e){var t=e.peerId;return r.a.createElement(k.a,{style:{marginBottom:12}},r.a.createElement(q.a,{variant:"h6",style:{padding:12}},t?"share https://rational-kunal.github.io/OneOnOne/join/"+t:r.a.createElement(G.a,null)))}var X=r.a.createContext();function Y(){var e=Object(i.f)().otherPeerId,t=Object(n.useState)(new E.a({host:"peerjs-server.herokuapp.com",secure:!0,port:443})),a=Object(u.a)(t,1)[0],c=Object(n.useState)(null),l=Object(u.a)(c,2),o=l[0],m=l[1],s=Object(n.useState)(null),f=Object(u.a)(s,2),b=f[0],p=f[1],j=Object(n.useState)(null),O=Object(u.a)(j,2),g=O[0],y=O[1],S=Object(n.useState)(null),C=Object(u.a)(S,2),w=C[0],x=C[1],k=Object(n.useState)(null),B=Object(u.a)(k,2),D=B[0],I=B[1];return Object(n.useEffect)((function(){a.on("open",(function(t){if(console.info("connection id",t),e){var n=a.connect(e);console.info("send connection to",e),p(n)}else m(t),a.on("connection",(function(e){console.info("connection arrived from",e),p(e)}))})),a.on("call",(function(e){console.info("call arrived",e),x(e)}))}),[]),Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){y(e)})).catch((function(e){return console.error(e)}))}),[]),Object(n.useEffect)((function(){b&&b.on("open",(function(){console.info("connection opened"),b.on("data",(function(e){var t;t=e,d.dispatch({actionType:h,blab:{blab:t,by:"notme"}})}))}))}),[b]),w?(D||w.answer(g),w.on("stream",(function(e){return I(e)}))):g&&b&&(console.info("calling to",e),x(a.call(e,g))),r.a.createElement(X.Provider,{value:function(e){b.send(e),function(e){d.dispatch({actionType:v,blab:{blab:e,by:"me"}})}(e)}},r.a.createElement(K,{localStream:g,otherPeerStream:D,shoulDisplayChat:null!==D,joinData:{peerId:o,shouldShow:void 0===e&&!b}}))}var Z=a(68),$=a(142),ee=a(143),te=a(144);function ae(){return r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/join/:otherPeerId"},r.a.createElement(Y,null)),r.a.createElement(i.a,{path:"/create"},r.a.createElement(Y,null)),r.a.createElement(i.a,{path:"/"},r.a.createElement(f,null))))}var ne=function(){var e=Object(Z.a)({palette:{type:"dark"}});return r.a.createElement($.a,{theme:e},r.a.createElement(ee.a,null),r.a.createElement(te.a,{style:{marginTop:24,marginBottom:24},maxWidth:"md"},r.a.createElement(ae,null)))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.27b0a293.chunk.js.map